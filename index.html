<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="description" content="Interactive economic dashboard for East Texas and US - GDP, CPI-U, Employment, and Sales Tax data">
    <meta name="theme-color" content="#CB6015">
    <title>Hibbs Monitor - East Texas Economic Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js" defer></script>
</head>
<body>
    <div class="page">
        <header class="topbar">
            <div class="brand">
                <div class="logo" aria-hidden="true">
                    <img src="images/utt_rgb_Level_1C_Hibbs_stacked-fullcolor (1).png" alt="UT Tyler Hibbs Institute logo" style="width: 100%; height: auto; object-fit: contain;">
                </div>
                <div>
                    <p class="eyebrow">Economic Analysis Dashboard</p>
                    <h1>Hibbs Monitor</h1>
                </div>
            </div>
            <div class="top-actions">
                <button id="downloadBtn" class="ghost">Download CSV</button>
                <a class="link" href="https://fred.stlouisfed.org/" target="_blank" rel="noreferrer">FRED</a>
            </div>
        </header>

        <main>
            <section class="hero">
                <div>
                    <p class="eyebrow">East Texas & US Economic Dashboard</p>
                    <h2>Monitor Economic Indicators for Tyler MSA and the United States</h2>
                    <p class="lede">Track national GDP and inflation trends alongside Tyler MSA employment growth and sales tax collections with live data, interactive charts, and CSV exports.</p>
                    <div class="controls" aria-label="Year range controls">
                        <label for="startYear">From</label>
                        <input type="number" id="startYear" min="1947" max="2099" value="2023" aria-label="Start Year">
                        <label for="endYear">to</label>
                        <input type="number" id="endYear" min="1947" max="2099" value="2025" aria-label="End Year">
                        <button id="updateBtn" class="primary">Update</button>
                    </div>
                    <p class="status" id="statusText" role="status" aria-live="polite">Loading data...</p>
                </div>
                <div class="stat-cards">
                    <div class="card">
                        <p class="eyebrow">Data Sources</p>
                        <h3>Multi-Source</h3>
                        <p class="muted">FRED, Texas Comptroller, Employment Data</p>
                    </div>
                    <div class="card">
                        <p class="eyebrow">Coverage</p>
                        <h3>Regional & National</h3>
                        <p class="muted">Tyler MSA (9 cities) and US economy</p>
                    </div>
                    <div class="card">
                        <p class="eyebrow">Features</p>
                        <h3>Interactive</h3>
                        <p class="muted">Live data, filtering, CSV exports</p>
                    </div>
                </div>
            </section>

            <!-- Tab Navigation -->
            <nav class="tab-nav" aria-label="Dashboard sections">
                <button class="tab-btn active" data-tab="gdp-cpi">US Economy</button>
                <button class="tab-btn" data-tab="employment">Regional Employment</button>
                <button class="tab-btn" data-tab="sales-tax">Tyler MSA Sales Tax</button>
                <button class="tab-btn" data-tab="mortgage-rates">Mortgage Rates</button>
                <button class="tab-btn" data-tab="data-table">Data Export</button>
            </nav>

            <!-- GDP & CPI Tab -->
            <div class="tab-content active" id="gdp-cpi">
                <section class="charts" aria-label="GDP and CPI Charts">
                    <div class="chart-card">
                        <div class="chart-header">
                            <div>
                                <p class="eyebrow">US Real GDP</p>
                                <h3>Quarterly growth rate (%)</h3>
                            </div>
                            <span class="chip gdp">FRED: A191RL1Q225SBEA</span>
                        </div>
                        <canvas id="gdpChart" role="img" aria-label="Real GDP Chart"></canvas>
                    </div>
                    <div class="chart-card">
                        <div class="chart-header">
                            <div>
                                <p class="eyebrow">US Inflation (CPI-U)</p>
                                <h3>Monthly change (%)</h3>
                            </div>
                            <span class="chip cpi">FRED: CPIAUCSL</span>
                        </div>
                        <canvas id="cpiChart" role="img" aria-label="CPI-U Chart"></canvas>
                    </div>
                </section>
            </div>

            <!-- Employment Tab -->
            <div class="tab-content" id="employment">
                <section class="card">
                    <div class="section-header">
                        <div>
                            <h2>Regional Employment Trends</h2>
                            <p class="chip" style="background: linear-gradient(135deg, var(--gdp), var(--cpi)); color: white;">Tyler MSA & Texas Non-Farm Payroll</p>
                        </div>
                        <button id="downloadEmploymentBtn" class="ghost">Download CSV</button>
                    </div>
                    <div class="chart-card" style="margin-top: 20px;">
                        <h3>Monthly Employment Growth Rate (%) - Tyler vs. Texas</h3>
                        <canvas id="employmentChart"></canvas>
                    </div>
                </section>
            </div>

            <!-- Sales Tax Tab -->
            <div class="tab-content" id="sales-tax">
                <section class="card">
                    <div class="section-header">
                        <div>
                            <h2>Tyler MSA Sales Tax Collections</h2>
                            <p class="chip" style="background: var(--gdp); color: white;">Texas Comptroller Data</p>
                        </div>
                        <button id="downloadSalesTaxBtn" class="ghost">Download CSV</button>
                    </div>
                    <div class="chart-card" style="margin-top: 20px;">
                        <h3>Monthly Sales Tax Collections ($)</h3>
                        <p style="color: #64748b; font-size: 13px; margin-top: 8px;">Tyler, Lindale, Whitehouse, Bullard, Troup, Noonday, Arp, Winona, New Chapel Hill</p>
                        <canvas id="salesTaxChart"></canvas>
                    </div>
                </section>
            </div>

            <!-- Mortgage Rates Tab -->
            <div class="tab-content" id="mortgage-rates">
                <section class="card">
                    <div class="section-header">
                        <div>
                            <h2>US Mortgage Rates</h2>
                            <p class="chip" style="background: linear-gradient(135deg, var(--gdp), var(--cpi)); color: white;">Freddie Mac Primary Mortgage Market Survey</p>
                        </div>
                        <button id="downloadMortgageBtn" class="ghost">Download CSV</button>
                    </div>
                    <div class="charts">
                        <div class="chart-card">
                            <h3>30-Year Fixed Rate Mortgage (%)</h3>
                            <canvas id="mortgage30Chart"></canvas>
                        </div>
                        <div class="chart-card">
                            <h3>15-Year Fixed Rate Mortgage (%)</h3>
                            <canvas id="mortgage15Chart"></canvas>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Data Table Tab -->
            <div class="tab-content" id="data-table">
                <section class="table-section card" aria-label="Data table">
                <div class="table-header">
                    <div>
                        <h2>Economic Data Export</h2>
                        <p class="eyebrow">GDP, CPI-U, Employment, and Sales Tax</p>
                    </div>
                    <button id="downloadBtnTable" class="ghost">Download CSV</button>
                </div>
                <div class="table-wrapper">
                    <table aria-label="Filtered GDP and CPI-U data">
                        <thead>
                            <tr>
                                <th scope="col">Date</th>
                                <th scope="col">GDP (% QoQ)</th>
                                <th scope="col">CPI-U (% MoM)</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody"></tbody>
                    </table>
                </div>
                    <p class="source-note">Data Source: Federal Reserve Economic Data (FRED). Live API with automatic sample fallback.</p>
                </section>
            </div>
        </main>

        <footer>
            <p>Hibbs Monitor — Comprehensive economic analysis for East Texas and the United States. Data sources: Federal Reserve Economic Data (FRED), Texas Comptroller, and regional employment statistics.</p>
        </footer>
    </div>

    <script src="employment-data.js"></script>
    <script src="mortgage-data.js?v=2"></script>
    <script src="dashboard.js?v=24"></script>
</body>
</html>



